(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{859:function(e,t,a){"use strict";a.r(t);var r,n=a(47),c=a(5),i=a(33),o=a.n(i),s=a(780),l=a(60),p=a(0),d=a.n(p),u=a(42),m=a(204),f=Object(m.a)({wrapper:{padding:"0 9%",display:"flex"},formGroup:{flex:1,margin:"0 10px","&:first-child":{marginLeft:0},"&:last-child":{marginRight:0}},formInput:{width:"100%",height:40,borderRadius:2,border:"1px #dadada solid",padding:"0 15px",transition:"border 0.3s","&:focus":{border:"1px black solid"}},inputSet:{margin:"15px -5px -5px","&:first-child":{marginTop:-5}},inputGroup:{display:"flex"},inputWrapper:{display:"flex",flex:1,margin:5},phoneInput:{display:"flex","& > div":{flex:1},"& > div > input":{width:"100%"}},item:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"calc(100% - 30)",padding:15},itemThumb:{padding:"0px 10px",width:50,height:50,objectFit:"contain"},itemInfo:{display:"flex",flex:1,flexDirection:"row",alignItems:"center",flexWrap:"wrap"},itemName:{flex:1,minWidth:200,fontSize:16,"& > span":{fontSize:14,color:"#333"}},itemPrice:{padding:"15px 0px",fontSize:14,"& > span":{fontSize:14}},couponForm:{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",padding:"0px 15px",margin:"15px 0px","& > div":{flex:3},"& > input":{minWidth:200,height:30,borderRadius:3}},checkCouponBtn:{backgroundColor:"transparent",border:"none",cursor:"pointer",transition:"opacity 0.3s",fontSize:14,"&:hover":{opacity:.6}},summary:{padding:15},summaryRow:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between",padding:"5px 0px",fontSize:14,"& > *":{fontSize:14}},actionBtn:(r={backgroundColor:"transparent",border:"none",display:"flex",width:"100%",justifyContent:"center",alignItems:"center",fontSize:14},Object(n.a)(r,"border","1px black solid"),Object(n.a)(r,"transition","opacity 0.3s"),Object(n.a)(r,"borderRadius",3),Object(n.a)(r,"padding",10),Object(n.a)(r,"cursor","pointer"),Object(n.a)(r,"&:hover, &:disabled",{opacity:.6,border:"1px #BBB solid"}),r),termsnConditions:{paddingTop:25,"& > span":{color:"#777",fontSize:12}},placeholder:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",padding:"35px 0",fontSize:24},pickupmsg:{fontSize:14,padding:15,backgroundColor:"#EFEFEF",borderRadius:3,marginTop:15},"@media (max-width: 1200px)":{inputGroup:{display:"block"},inputSet:{"&:last-child":{marginTop:30}}},"@media (max-width: 600px)":{wrapper:{display:"block"},formGroup:{margin:0,"&:last-child":{marginTop:60}},inputGroup:{display:"block"},inputSet:{"&:last-child":{marginTop:30}}}}),O=a(209),E=(a(66),a(781)),h=a(206),b=a(14),g=a.n(b),y=a(837),x=(a(835),a(43)),v=a(104),I=a(6),C=a(800),N=a(17),_=a(10),T=a(38),j=a(3);t.default=Object(O.a)(Object(u.b)(function(e){return{items:e.cart.items,order:e.cart.order,rates:e.cart.rates||[],shop:e.common.shopInfo||{}}},function(e,t){return{getShippingMethods:function(){var a=Object(l.a)(o.a.mark(function a(r,n,c){var i,l;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(i=[],!r.auto_ship){a.next=5;break}return a.next=4,x.a.Checkout.getShippingRate({cart:t.cookies.get("cart"),shipping:{address:n,country:"HK"}}).map(function(e){return{id:e.id,title:e.name,charge:Object.values(e.rates)[0],address_required:!0}});case 4:i=a.sent;case 5:return a.next=7,x.a.Checkout.getShippingMethods();case 7:if(a.t1=a.sent[0],a.t1){a.next=10;break}a.t1={};case 10:if(a.t0=a.t1.shipping_methods,a.t0){a.next=13;break}a.t0=[];case 13:a.t2=function(e){return{id:e.code,title:e.title,charge:e.charge,address_required:e.shipping_address_required}},l=a.t0.map(a.t2),e({type:I.A,payload:[].concat(Object(s.a)(i),Object(s.a)(l))}),c&&c();case 17:case"end":return a.stop()}},a)}));return function(e,t,r){return a.apply(this,arguments)}}(),placeOrder:function(){var a=Object(l.a)(o.a.mark(function a(r,n){var i,s,l;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(i=Object(c.a)({},r),a.prev=1,s=t.cookies.get("cart"),l=null,s){a.next=9;break}return a.next=6,x.a.Checkout.getCart();case 6:l=a.sent,(s=(((((l||{}).data||{}).data||{}).rows||[]).shift()||{}).id)&&t.cookies.set("cart",s);case 9:return a.next=11,x.a.Checkout.placeOrderWithoutLogin(Object(c.a)({},i,{items:s}));case 11:(((l=a.sent)||{}).data||{}).result&&(t.cookies.remove("cart"),e({type:I.q,payload:[]}),h.b.success("Order placed successfully!",{position:h.b.POSITION.TOP_RIGHT}),n&&n()),a.next=19;break;case 15:a.prev=15,a.t0=a.catch(1),h.b.error(((a.t0.response.data||{}).messages||[]).join("\n")||a.t0.message,{position:h.b.POSITION.TOP_RIGHT}),n&&n();case 19:case"end":return a.stop()}},a,null,[[1,15]])}));return function(e,t){return a.apply(this,arguments)}}(),updateOrder:function(t){return e({type:I.h,payload:t})},checkCoupons:function(){var e=Object(l.a)(o.a.mark(function e(t){var a,r,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length<1)){e.next=4;break}h.b.error("Please enter the coupon code(s).",{position:h.b.POSITION.TOP_RIGHT}),e.next=14;break;case 4:return e.prev=4,e.next=7,x.a.Checkout.getPromoCode(t);case 7:(((a=e.sent)||{}).data||{}).result&&(r=[],n=((a.data.data||{}).rows||[]).reduce(function(e,t){return e[t.code]=t,e},{}),t.split(/ *, */).filter(function(e){return e}).forEach(function(e){n[e]||r.push("".concat(e," is invalid."))}),r.length>0?h.b.error(r.join("\n"),{position:h.b.POSITION.TOP_RIGHT}):h.b.success("All coupons are valid.",{position:h.b.POSITION.TOP_RIGHT})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),h.b.error(((e.t0.response.data||{}).messages||[]).join("\n")||e.t0.message,{position:h.b.POSITION.TOP_RIGHT});case 14:case"end":return e.stop()}},e,null,[[4,11]])}));return function(t){return e.apply(this,arguments)}}()}})(function(e){var t=f(),a=e.items,r=e.order,i=e.rates,o=e.shop,s=void 0!=r.shippings&&!0===i.filter(function(e){return e.id==Object.values(r.shippings)[0]})[0].address_required,l=function(){var t=e.order||{contact:{},shipping:{},payment:{}};return((t.contact||{}).first_name||"").length&&((t.contact||{}).last_name||"").length&&((t.contact||{}).phone||"").length&&((t.payment||{}).card||"").length&&((t.payment||{}).exp_date||"").length&&((t.payment||{}).csc||"").length}(),p=function(){var e=r.shippings;return!!(void 0!=e&&(Object.keys(e)||[]).length>0&&Object.keys(e)[0]==o.id&&l)&&(!s||!!(s&&((r.shipping||{}).address||"").length>0))}();return d.a.createElement("div",null,d.a.createElement(v.a,{title:Object(T.a)(_.a.CHECKOUT)}),(a||[]).length?d.a.createElement("div",{className:t.wrapper},d.a.createElement("div",{className:t.formGroup,style:{flex:3}},d.a.createElement("h3",null,d.a.createElement(N.a,{keyOfI18n:_.a.CHECKOUT_BILLING_DETAIL})),d.a.createElement("div",null,d.a.createElement("div",{className:t.inputSet},d.a.createElement("div",{className:t.inputGroup},d.a.createElement("div",{className:t.inputWrapper},d.a.createElement("input",{type:"text",className:t.formInput,placeholder:Object(T.a)(_.a.FIRST_NAME),onChange:function(t){return e.updateOrder(Object(c.a)({},e.order,{contact:Object(c.a)({},(e.order||{}).contact,{first_name:t.target.value})}))},disabled:!0===r.processing})),d.a.createElement("div",{className:t.inputWrapper},d.a.createElement("input",{type:"text",className:t.formInput,placeholder:Object(T.a)(_.a.LAST_NAME),onChange:function(t){return e.updateOrder(Object(c.a)({},e.order,{contact:Object(c.a)({},(e.order||{}).contact,{last_name:t.target.value})}))},disabled:!0===r.processing}))),d.a.createElement("div",{className:t.inputGroup},d.a.createElement("div",{className:t.inputWrapper},d.a.createElement("input",{type:"text",className:t.formInput,placeholder:Object(T.a)(_.a.EMAIL_ADDRESS),onChange:function(t){return e.updateOrder(Object(c.a)({},e.order,{contact:Object(c.a)({},(e.order||{}).contact,{email:t.target.value})}))},disabled:!0===r.processing})),d.a.createElement("div",{className:t.inputWrapper},d.a.createElement(y.a,{type:"text",className:g()(t.formInput,t.phoneInput),placeholder:Object(T.a)(_.a.CHECKOUT_BILLING_DETAIL_PHONE_PLACEHOLDER),onChange:function(t){return e.updateOrder(Object(c.a)({},e.order,{contact:Object(c.a)({},(e.order||{}).contact,{phone:t})}))},disabled:!0===r.processing}))),s&&d.a.createElement("div",{className:t.inputWrapper},d.a.createElement("input",{type:"text",className:t.formInput,placeholder:Object(T.a)(_.a.CHECKOUT_BILLING_STREET_ADDRESS),onChange:function(t){return e.updateOrder(Object(c.a)({},e.order,{shipping:Object(c.a)({},(e.order||{}).shipping,{address:t.target.value,country:"HK"})}))},disabled:!0===r.processing}))),d.a.createElement("h3",{style:{paddingTop:"15px"}},d.a.createElement(N.a,{keyOfI18n:_.a.CHECKOUT_PAYMENT_INFOFORMATION})),d.a.createElement("div",{className:t.inputSet},d.a.createElement("div",{className:t.inputWrapper},d.a.createElement(E.a,{format:"#### #### #### ####",className:t.formInput,placeholder:Object(T.a)(_.a.CHECKOUT_BILLING_DETAIL_VISA_PLACEHOLDER),onValueChange:function(t){var a=t.value;return e.updateOrder(Object(c.a)({},e.order,{payment:Object(c.a)({},(e.order||{}).payment,{card:a})}))},disabled:!0===r.processing})),d.a.createElement("div",{className:t.inputGroup},d.a.createElement("div",{className:t.inputWrapper},d.a.createElement(E.a,{format:"##/##",className:t.formInput,placeholder:Object(T.a)(_.a.CHECKOUT_BILLING_EXPIRY_DATE),mask:["M","M","Y","Y"],onValueChange:function(t){var a=t.formattedValue;return e.updateOrder(Object(c.a)({},e.order,{payment:Object(c.a)({},(e.order||{}).payment,{exp_date:a})}))},disabled:!0===r.processing})),d.a.createElement("div",{className:t.inputWrapper},d.a.createElement(E.a,{format:"###",className:t.formInput,placeholder:Object(T.a)(_.a.CHECKOUT_BILLING_CVC),onValueChange:function(t){var a=t.value;return e.updateOrder(Object(c.a)({},e.order,{payment:Object(c.a)({},(e.order||{}).payment,{csc:a})}))},disabled:!0===r.processing})))))),d.a.createElement("div",{className:t.formGroup,style:{flex:2}},d.a.createElement("div",null,d.a.createElement("h3",null,d.a.createElement(N.a,{keyOfI18n:_.a.CHECKOUT_YOUR_ORDER_SUMMARY})),d.a.createElement("div",{style:{width:"calc(100% - 30px)",border:"1px #dadada solid",borderRadius:2,padding:"15px"}},(a||[]).map(function(e,a){return d.a.createElement("div",{key:"item-".concat(a),className:t.item},d.a.createElement("img",{className:t.itemThumb,src:(e.media||[])[0]}),d.a.createElement("div",{className:t.itemInfo},d.a.createElement("div",{className:t.itemName},e.name,d.a.createElement("br",null),d.a.createElement("span",null,e.variant)),d.a.createElement("div",{className:t.itemPrice},d.a.createElement(E.a,{value:e.price,thousandSeparator:!0,prefix:"HK$",displayType:"text"})," x ",e.qty)))}),d.a.createElement("div",{style:{height:.5,backgroundColor:"#dadada"}})," ",d.a.createElement("div",{className:t.couponForm},d.a.createElement("div",{className:t.inputWrapper},d.a.createElement("input",{type:"text",className:t.formInput,placeholder:Object(T.a)(_.a.PROMO_CODE_TYPE_YOUR_PROMO_CODE_HERE),onChange:function(t){return e.updateOrder(Object(c.a)({},e.order,{coupons:t.target.value}))},disabled:!0===r.processing})),d.a.createElement("div",{style:{display:"flex",justifyContent:"center",flex:1}},d.a.createElement("button",{type:"button",className:t.checkCouponBtn,onClick:function(t){return e.checkCoupons((e.order||{}).coupons||"")},disabled:!((r||{}).coupons||"").length},d.a.createElement(N.a,{keyOfI18n:_.a.PROMO_CODE_CHECK_BTN})))),d.a.createElement("div",{style:{height:.5,backgroundColor:"#dadada"}})," ",d.a.createElement("div",{className:t.summary},d.a.createElement("div",{className:t.summaryRow},d.a.createElement(N.a,{keyOfI18n:_.a.CHECKOUT_SUBTOTAL}),d.a.createElement(E.a,{value:(a||[]).reduce(function(e,t){return e+t.qty*t.price},0),thousandSeparator:!0,prefix:"HK$",displayType:"text"})),d.a.createElement("div",{className:t.summaryRow},d.a.createElement(N.a,{keyOfI18n:_.a.CHECKOUT_SHIPPING_FEE}),d.a.createElement(E.a,{value:void 0==r.shippings?"-":i.filter(function(e){return e.id==Object.values(r.shippings)[0]})[0].charge,thousandSeparator:!0,prefix:"HK$",displayType:"text"}))),d.a.createElement("div",{style:{height:.5,backgroundColor:"#dadada"}})," ",d.a.createElement("div",{className:t.summary},!0===r.processing?d.a.createElement("div",{style:{width:"100%",display:"flex",justifyContent:"center"}},d.a.createElement(j.b,{size:15,color:"#000"})):i.length?d.a.createElement("div",null,d.a.createElement("div",{style:{fontSize:13,textTransform:"uppercase",paddingBottom:"7px"}},d.a.createElement(N.a,{keyOfI18n:_.a.CHECKOUT_SHIPPING_METHOD})),d.a.createElement("div",null,d.a.createElement(C.a,{placeholder:d.a.createElement(N.a,{keyOfI18n:_.a.CHECKOUT_SELECT_COURIER}),onChange:function(t){var a=t.value;return e.updateOrder(Object(c.a)({},e.order,{shippings:Object(n.a)({},a.split(":")[0],a.split(":")[1])}))},options:i.map(function(e){return{value:"".concat(o.id,":").concat(e.id),label:"".concat(e.title," - HK$").concat(e.charge)}})})),d.a.createElement("div",{className:t.termsnConditions},d.a.createElement("span",null,d.a.createElement(N.a,{keyOfI18n:_.a.TERM_AND_CONDITIONS}))),d.a.createElement("button",{className:t.actionBtn,style:{marginTop:15},onClick:function(t){e.updateOrder(Object(c.a)({},e.order,{processing:!0})),e.placeOrder(e.order,function(){e.updateOrder(Object(c.a)({},e.order,{processing:!1}))})},disabled:!l||!p},d.a.createElement(N.a,{keyOfI18n:_.a.PLACE_ORDER}))):d.a.createElement("button",{className:t.actionBtn,onClick:function(t){e.updateOrder(Object(c.a)({},e.order,{processing:!0})),e.getShippingMethods(o,((e.order||{}).shipping||{}).address,function(){e.updateOrder(Object(c.a)({},e.order,{processing:!1}))})},disabled:!l},d.a.createElement(N.a,{keyOfI18n:_.a.CONTINUE_SHIPPING}))))))):d.a.createElement("div",{className:t.placeholder},d.a.createElement("div",{style:{fontSize:24}},d.a.createElement(N.a,{keyOfI18n:_.a.CHECKOUT_YOU_HAVE_NOT_PUT_ANY_ITEMS_IN_CART})),d.a.createElement("div",{style:{fontSize:24,display:"flex",flexDirection:"row",alignItems:"center",padding:"5px 0px"}},d.a.createElement(N.a,{keyOfI18n:_.a.GOTO}),"\xa0",d.a.createElement("button",{type:"button",style:{fontSize:24,border:"none",backgroundColor:"transparent",textDecoration:"underline",cursor:"pointer"},onClick:function(t){return e.history.push("/products")}},d.a.createElement(N.a,{keyOfI18n:_.a.PRODUCTS})))))}))}}]);
//# sourceMappingURL=12.af22ca72.chunk.js.map