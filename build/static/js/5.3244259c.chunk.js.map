{"version":3,"sources":["components/MainPage/Overview.js"],"names":["styles","createUseStyles","tips","padding","marginTop","tipsWrapper","margin","display","flexWrap","tipsItem","width","backgroundColor","cursor","transition","&:hover","boxShadow","featuredMerchandises","featuredMerchandisesWrapper","featuredMerchandisesItem","borderWidth","itemName","textAlign","paddingBottom","fontSize","fontWeight","color","itemPrice","_itemPrice","Object","_Users_lawson_work_oneshop_development_frontend_os_theme_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","@media (max-width: 600px)","connect","state","product","featuredArticles","feed","shopInfo","common","dispatch","initFeaturedArticles","agent","Feeds","getFeaturedArticles","then","res","type","ARTICLE_INIT_FEATURED","payload","data","rows","catch","err","initTips","getTips","ARTICLE_INIT_TIPS","initFeaturedMerchandises","Products","getFeaturedMerchandises","MERCHANDISE_INIT_FEATURED","substring","str","concat","substr","withRouter","props","classes","history","useEffect","undefined","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","map","article","idx","key","style","height","alignItems","justifyContent","onClick","redirectUrl","id","objectFit","src","sections","media","url","position","textShadow","title","className","fontFamily","paddingLeft","_Widget_I18nText__WEBPACK_IMPORTED_MODULE_8__","keyOfI18n","LATEST_INFO","slice","length","flex","backgroundImage","backgroundSize","backgroundPosition","flexDirection","h2p","description","FEATURED_PRODUCTS","item","push","name","currency","toUpperCase","price"],"mappings":"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","file":"static/js/5.3244259c.chunk.js","sourcesContent":["import React, {useEffect} from 'react';\nimport {createUseStyles} from 'react-jss';\nimport {connect} from 'react-redux';\nimport {withRouter} from 'react-router-dom';\n\nimport h2p from 'html2plaintext';\n\nimport {\n    ARTICLE_INIT_FEATURED,\n    ARTICLE_INIT_TIPS,\n    MERCHANDISE_INIT_FEATURED\n} from '../../constants/actionType';\nimport agent from '../../agent';\n\nimport {I18nText} from \"../Widget/I18nText\";\nimport {keyOfI18n} from \"../../constants/locale/interface\";\nimport {redirectUrl} from \"../../api/ApiUtils\";\n\nconst styles = createUseStyles({\n    tips: {\n        padding: '0 3%',\n        marginTop: 50\n    },\n    tipsWrapper: {\n        margin: 0,\n        display: 'flex',\n        flexWrap: 'wrap',\n        padding: 0,\n    },\n    tipsItem: {\n        display: 'flex',\n        width: 'calc(50% - 20px)',\n        backgroundColor: '#f7f7f7',\n        margin: 10,\n        cursor : \"pointer\",\n        transition : \"box-shadow 0.3s\",\n        \"&:hover\" : {\n            boxShadow : \"3px 3px 15px #EFEFEF\"\n        }\n    },\n\n    featuredMerchandises: {\n        padding: '0 3%',\n        marginTop: 50\n    },\n    featuredMerchandisesWrapper: {\n        display: 'flex',\n        margin: 0,\n        padding: 0\n    },\n    featuredMerchandisesItem: {\n        width: 'calc(20% - 20px)',\n        margin: 10,\n        backgroundColor: 'transparent',\n        borderWidth: 0,\n        cursor: 'pointer',\n        transition : \"box-shadow 0.3s\",\n        \"&:hover\" : {\n            boxShadow : \"3px 3px 15px #EFEFEF\"\n        }\n    },\n    itemName : {\n        textAlign : \"left\",\n        paddingBottom : 7,\n        fontSize : 17,\n        fontWeight : 300,\n        color : \"#666\"\n    },\n    itemPrice : {\n        textAlign : \"left\",\n        paddingBottom : 15,\n        fontSize : 17,\n        fontWeight : 300,\n        textAlign : \"left\",\n        color : \"#666\"\n    },\n\n    // for mobile\n    '@media (max-width: 600px)': {\n        tipsItem: {\n            display: 'block',\n            width: 'calc(100% - 20px)'\n        },\n        featuredMerchandisesWrapper: {\n            display: 'block'\n        },\n        featuredMerchandisesItem: {\n            width: 'calc(100% - 20px)'\n        }\n    }\n    \n    // section: {\n    //     width: '100%',\n    //     margin: '0 80px'\n    // },\n    // productCategory: {\n    //     paddingTop: '40px',\n\n    //     paddingBottom: '40px',\n    //     // backgroundColor: theme.palette.background.paper\n    // },\n    // text: {\n    //     textAlign: 'center',\n    //     // color: theme.palette.secondary.light,\n    //     marginBottom: '30px',\n    //     wordWrap: 'break-word',\n    //     wordBreak: 'break-all'\n\n    // },\n    // title: {\n    //     paddingTop: '20px',\n    //     marginTop: '50px',\n    //     fontWeight: '700',\n    //     // color: theme.palette.primary.dark,\n    //     marginBottom: '20px',\n    //     textAlign: 'center'\n    // }\n});\n\n\nconst mapStateToProps = state => ({\n    featuredMerchandises: state.product.featuredMerchandises,\n    featuredArticles: state.feed.featuredArticles,\n    tips: state.feed.tips,\n    shopInfo: state.common.shopInfo\n});\n\n\nconst mapDispatchToProps = dispatch => ({\n    initFeaturedArticles: () => {\n        try {\n            agent.Feeds.getFeaturedArticles()\n            .then(res => {\n                dispatch({\n                    type    : ARTICLE_INIT_FEATURED,\n                    payload : res.data.data.rows || []\n                })\n            })\n            .catch(err => {\n\n            })\n        } catch(err) {\n\n        }\n    },\n    initTips: () => {\n        try {\n            agent.Feeds.getTips()\n            .then(res => {\n                dispatch({\n                    type    : ARTICLE_INIT_TIPS,\n                    payload : res.data.data.rows || []\n                })\n            })\n            .catch(err => {\n\n            })\n        } catch(err) {\n\n        }\n    },\n    initFeaturedMerchandises: () => {\n        try {\n            agent.Products.getFeaturedMerchandises()\n            .then(res => {\n                dispatch({\n                    type    : MERCHANDISE_INIT_FEATURED,\n                    payload : res.data.data.rows || []\n                })\n            })\n            .catch(err => {\n\n            })\n        } catch(err) {\n\n        }\n    },\n    substring: str => {\n        return `${str.substr(0, 130)}...`;\n    }\n});\n\n\nconst MainPageOverview = props => {\n    const classes = styles();\n    const {featuredMerchandises, featuredArticles, tips, history, shopInfo} = props;\n\n    useEffect(() => {\n        if (featuredArticles === undefined) props.initFeaturedArticles();\n        if (tips === undefined) props.initTips();\n        if (featuredMerchandises === undefined) props.initFeaturedMerchandises();\n        return () => {\n\n        };\n    }, [featuredArticles, tips, featuredMerchandises]);\n\n    return <div>\n        <div>\n            {(featuredArticles || []).map((article, idx) => <li\n                key={idx}\n                style={{\n                    height: 390,\n                    display: 'flex',\n                    alignItems: 'flex-end',\n                    justifyContent: 'flex-end',\n                    cursor : \"pointer\"\n                }}\n                onClick={() => redirectUrl('/articles/' + article.id, props.history)}\n            >\n                <img\n                    style={{\n                        objectFit : \"cover\",\n                        width : \"100%\",\n                        height : \"100%\"\n                    }} \n                    src={article.sections[0].media[0].url}\n                />\n                <span\n                    style={{\n                        position : \"absolute\",\n                        textShadow: '0px 1px 4px #000',\n                        color: '#fff',\n                        fontSize: 15,\n                        margin: 15,\n                        fontSize : \"2em\"\n                    }}\n                >{article.sections[0].title}</span>\n            </li>)}\n        </div>\n\n        <div className={classes.tips}>\n            <h2 style={{ fontSize: 21, fontFamily: '-apple-system,BlinkMacSystemFont,sans-serif', paddingLeft : \"15px\"}}>\n                <I18nText keyOfI18n={keyOfI18n.LATEST_INFO}/>\n            </h2>\n            <ul className={classes.tipsWrapper}>\n                {(tips || []).slice(0, 4).map((article, idx) => <li\n                    key={idx}\n                    className={classes.tipsItem}\n                    onClick={() => redirectUrl('/articles/' + article.id, props.history)}\n                >\n                    {(article.sections[0] || {}).media.length > 0 && <div\n                        style={{\n                            flex: 4,\n                            height: 250,\n                            backgroundImage: `url(${article.sections[0].media[0].url})`,\n                            backgroundSize: 'cover',\n                            backgroundPosition: 'center',\n                            cursor : \"pointer\"\n                        }}\n                    />}\n                    <div\n                        style={{\n                            flex: 6,\n                            display: 'flex',\n                            flexDirection: 'column',\n                            padding: 25,\n                            alignItems: 'center',\n                            justifyContent: 'center'\n                        }}\n                    >\n                        <h5\n                            style={{\n                                margin: 0\n                            }}\n                        >{article.sections[0].title}</h5>\n                        <p>{props.substring(h2p(article.sections[0].description))}</p>\n                    </div>\n                </li>)}\n            </ul>\n        </div>\n        \n        <div className={classes.featuredMerchandises}>\n            <h2 style={{ fontSize: 21, fontFamily: '-apple-system,BlinkMacSystemFont,sans-serif', paddingLeft : \"15px\" }}>\n                <I18nText keyOfI18n={keyOfI18n.FEATURED_PRODUCTS}/>\n            </h2>\n            <ul className={classes.featuredMerchandisesWrapper}>\n                {(featuredMerchandises || []).map((item, idx) => <button\n                    key={idx}\n                    type=\"button\"\n                    className={classes.featuredMerchandisesItem}\n                    onClick={() => history.push(`/products/${item.id}`)}\n                >\n                    <div\n                        style={{\n                            backgroundImage: `url(${item.media[0].url})`,\n                            backgroundPosition: 'top center',\n                            backgroundSize: 'cover',\n                            height: 280\n                        }}\n                    />\n                    <br/>\n                    <div>\n                        <div className={classes.itemName}>{item.name}</div>\n                        <div className={classes.itemPrice}>{`${shopInfo.currency.toUpperCase()} ${item.price}`}</div>\n                    </div>\n                </button>)}\n            </ul>\n        </div>\n    </div>;\n};\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(MainPageOverview))"],"sourceRoot":""}