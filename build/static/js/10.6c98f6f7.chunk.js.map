{"version":3,"sources":["components/Cart/Overview.js"],"names":["styles","createUseStyles","wrapper","padding","table","width","backgroundColor","boxShadow","borderRadius","headerColumn","color","footerColumn","borderTop","placeholder","display","justifyContent","alignItems","flexDirection","timers","ShoppingCartTable","props","classes","items","history","react__WEBPACK_IMPORTED_MODULE_2___default","a","createElement","_Layout_LoadingPage__WEBPACK_IMPORTED_MODULE_11__","_Layout_Body_Header__WEBPACK_IMPORTED_MODULE_10__","title","className","_Widget_I18nText__WEBPACK_IMPORTED_MODULE_13__","keyOfI18n","IMAGE","PRODUCT","PRICE","QUANTITY","TOTAL","REMOVE","length","map","item","idx","key","src","handleImgValid","media","img","height","name","variant","react_number_format__WEBPACK_IMPORTED_MODULE_6__","value","price","thousandSeparator","prefix","displayType","type","id","qty","onChange","e","updateItemQty","target","binIcon","onClick","deleteItem","colSpan","CHECKOUT_YOU_HAVE_NOT_PUT_ANY_ITEMS_IN_CART","GOTO","push","PRODUCTS","reduce","total","CHECKOUT","defaultProps","withCookies","connect","state","cart","dispatch","ownProps","_deleteItem","Object","_Users_Lucas_Desktop_Businesses_Oneshop_Products_oneshop_Sites_os_theme_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_Users_Lucas_Desktop_Businesses_Oneshop_Products_oneshop_Sites_os_theme_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","mark","_callee","wrap","_context","prev","next","cookies","get","CART_DELETE_ITEM","payload","agent","Checkout","then","res","data","result","toast","success","position","POSITION","TOP_RIGHT","clearTimeout","error","messages","join","catch","err","message","stop","_x","apply","this","arguments","_updateItemQty","_callee2","_context2","CART_UPDATE_ITEM","setTimeout","saveItem","_x2","_x3"],"mappings":"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","file":"static/js/10.6c98f6f7.chunk.js","sourcesContent":["import React from 'react';\nimport {connect} from 'react-redux';\nimport {createUseStyles} from 'react-jss';\nimport {withCookies} from 'react-cookie';\n\nimport PropTypes from 'prop-types';\nimport NumberFormat from 'react-number-format';\nimport { toast } from 'react-toastify';\n\nimport {handleImgValid} from \"../../api/ApiUtils\";\nimport agent from \"../../agent\";\n\nimport Header from '../Layout/Body/Header';\nimport LoadingPage from '../Layout/LoadingPage';\n\nimport {\n    CART_UPDATE_ITEM,\n    CART_DELETE_ITEM,\n} from \"../../constants/actionType\";\n\nimport {I18nText} from \"../Widget/I18nText\";\nimport {keyOfI18n} from \"../../constants/locale/interface\";\n\n\n// styling\nconst styles = createUseStyles({\n    wrapper: {\n        padding: '0 9%'\n    },\n    table: {\n        width: '100%',\n        backgroundColor: '#f7f7f7',\n        boxShadow: '0px 1px 5px 0px rgba(0,0,0,0.2), 0px 2px 2px 0px rgba(0,0,0,0.14), 0px 3px 1px -2px rgba(0,0,0,0.12)',\n        borderRadius: 4\n    },\n    headerColumn: {\n        color: 'rgba(0, 0, 0, 0.54)'\n    },\n    footerColumn: {\n        borderTop: '1px solid rgb(224, 224, 224)'\n    },\n    placeholder: {\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        flexDirection: 'column',\n        padding: '35px 0'\n    }\n});\n\n\n// data\nconst mapStateToProps = state => ({\n    items: state.cart.items\n});\n\n// timers for updating qty\nlet timers = {};\n\n\n// events\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n    deleteItem: async id => {\n        // get cart\n        const cart = ownProps.cookies.get('cart');\n        // update local model first\n        await dispatch({\n            type: CART_DELETE_ITEM,\n            payload: {\n                id\n            }\n        });\n        // delete item\n        cart && agent.Checkout.deleteItem(\n            cart,\n            id\n        ).then(res => {\n            // failed\n            if (!res.data.result) {\n                // return error\n                toast.error((res.data.messages || []).join(\"\\n\"), {\n                    position: toast.POSITION.TOP_RIGHT\n                });\n            } else {\n                // return message\n                toast.success('Item deleted.', {\n                    position: toast.POSITION.TOP_RIGHT\n                });\n                // delete timer\n                if (timers[id]) {\n                    clearTimeout(timers[id]);\n                    delete timers[id];\n                }\n            }\n        })\n        .catch(err => {\n            // return error\n            toast.error(err.message, {\n                position: toast.POSITION.TOP_RIGHT\n            });\n        });\n    },\n    updateItemQty: async (id, qty) => {\n        // get cart\n        const cart = ownProps.cookies.get('cart');\n        // update local model first\n        await dispatch({\n            type: CART_UPDATE_ITEM,\n            payload: {\n                id,\n                qty\n            },\n        });\n        // clear timer\n        if (timers[id]) timers[id] = clearTimeout(timers[id]);\n        // reset timer\n        timers[id] = setTimeout(() => {\n            timers[id] = clearTimeout(timers[id]);\n            // cart exists, save item\n            cart && agent.Checkout.saveItem(\n                cart,\n                id,\n                qty\n            )\n            .then(res => {\n                // failed\n                if (!res.data.result) {\n                    // return error\n                    toast.error((res.data.messages || []).join(\"\\n\"), {\n                        position: toast.POSITION.TOP_RIGHT\n                    });\n                } else {\n                    // return message\n                    toast.success('Item updated.', {\n                        position: toast.POSITION.TOP_RIGHT\n                    });\n                }\n            })\n            .catch(err => {\n                // return error\n                toast.error(err.message, {\n                    position: toast.POSITION.TOP_RIGHT\n                });\n            })\n        }, 550);\n    }\n});\n\n\n// views\nconst ShoppingCartTable = props => {\n    const classes = styles();\n    const {items, history} = props;\n\n    if (items === null) return <LoadingPage/>;\n\n    return <div>\n        <Header\n            title={'Shopping Cart'}\n            classes={{}}\n        />\n        <div className={classes.wrapper}>\n            <table className={classes.table}>\n                <thead>\n                    <tr>\n                        <td className={classes.headerColumn}><I18nText keyOfI18n={keyOfI18n.IMAGE}/></td>\n                        <td className={classes.headerColumn}><I18nText keyOfI18n={keyOfI18n.PRODUCT}/></td>\n                        <td className={classes.headerColumn}><I18nText keyOfI18n={keyOfI18n.PRICE}/></td>\n                        <td className={classes.headerColumn}><I18nText keyOfI18n={keyOfI18n.QUANTITY}/></td>\n                        <td className={classes.headerColumn}><I18nText keyOfI18n={keyOfI18n.TOTAL}/></td>\n                        <td className={classes.headerColumn}><I18nText keyOfI18n={keyOfI18n.REMOVE}/></td>\n                    </tr>\n                </thead>\n                <tbody>\n                    {items.length > 0 ? items.map((item, idx) => <tr\n                        key={idx}\n                    >\n                        <td>\n                            <img\n                                src={handleImgValid(item.media[0])}\n                                className={classes.img}\n                                height=\"65\"\n                            />    \n                        </td>\n                        <td>\n                            <div>{item.name}</div>\n                            <div>{item.variant}</div>\n                        </td>\n                        <td>\n                            <NumberFormat\n                                value={item.price}\n                                thousandSeparator={true}\n                                prefix={'HK$'}\n                                displayType={'text'}\n                            />\n                        </td>\n                        <td>\n                            <input\n                                type=\"number\"\n                                name={item.id}\n                                value={item.qty}\n                                onChange={e => props.updateItemQty(e.target.name, e.target.value)}\n                            />    \n                        </td>\n                        <td>\n                            <NumberFormat\n                                value={item.qty*item.price}\n                                thousandSeparator={true}\n                                prefix={'HK$'}\n                                displayType={'text'}\n                            />\n                        </td>\n                        <td>\n                            <button\n                                type=\"button\"\n                                className={classes.binIcon + ' ' + 'icon-bin'}\n                                onClick={e => props.deleteItem(item.id)}\n                            />\n                        </td>\n                    </tr>) : <tr>\n                        <td colSpan=\"6\">\n                            <div className={classes.placeholder}>\n                                <div>\n                                    <I18nText keyOfI18n={keyOfI18n.CHECKOUT_YOU_HAVE_NOT_PUT_ANY_ITEMS_IN_CART}/>\n                                </div>\n                                <div>\n                                    <I18nText keyOfI18n={keyOfI18n.GOTO}/>\n                                    &nbsp;\n                                    <button\n                                        type='button'\n                                        onClick={e => props.history.push('/products')}\n\n                                    >\n                                        <I18nText keyOfI18n={keyOfI18n.PRODUCTS}/>\n                                    </button>\n                                </div>\n                            </div>\n                        </td>\n                    </tr>}\n                </tbody>\n                {items.length > 0 && <tfoot>\n                    <tr>\n                        <td colSpan=\"4\" className={classes.footerColumn}>\n                            <I18nText keyOfI18n={keyOfI18n.TOTAL}/>\n                        </td>\n                        <td className={classes.footerColumn}>\n                            <NumberFormat\n                                value={items.reduce((total, item) => total + (item.price * item.qty), 0)}\n                                thousandSeparator={true}\n                                prefix={'HK$'}\n                                displayType={'text'}\n                            />\n                        </td>\n                        <td className={classes.footerColumn}>\n                            <button\n                                type=\"button\"\n                                onClick={e => history.push('/checkout')}\n                            >\n                                <I18nText keyOfI18n={keyOfI18n.CHECKOUT}/>\n                            </button>\n                        </td>\n                    </tr>\n                </tfoot>}\n            </table>\n        </div>\n    </div>;\n};\n\n\nShoppingCartTable.defaultProps = {};\n\n\nShoppingCartTable.propTypes = {\n    //classes: PropTypes.object.isRequired,\n};\n\n\nexport default withCookies(connect(mapStateToProps, mapDispatchToProps)(ShoppingCartTable))"],"sourceRoot":""}