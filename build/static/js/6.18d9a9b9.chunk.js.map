{"version":3,"sources":["components/MainPage/Overview.js"],"names":["styles","createUseStyles","tips","padding","marginTop","tipsWrapper","margin","display","flexWrap","tipsItem","width","backgroundColor","cursor","transition","&:hover","boxShadow","featuredMerchandises","featuredMerchandisesWrapper","featuredMerchandisesItem","borderWidth","itemName","textAlign","paddingBottom","fontSize","fontWeight","color","itemPrice","_itemPrice","Object","C_Users_Lucas_Documents_Oneshop_Products_Themes_os_theme_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_0__","@media (max-width: 600px)","connect","state","product","featuredArticles","feed","shopInfo","common","dispatch","initFeaturedArticles","agent","Feeds","getFeaturedArticles","then","res","type","ARTICLE_INIT_FEATURED","payload","data","rows","catch","err","initTips","getTips","ARTICLE_INIT_TIPS","initFeaturedMerchandises","Products","getFeaturedMerchandises","MERCHANDISE_INIT_FEATURED","substring","str","concat","substr","withRouter","props","classes","history","useEffect","undefined","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","map","article","idx","_ref","key","style","height","alignItems","justifyContent","position","onClick","redirectUrl","id","objectFit","src","sections","media","url","textShadow","title","length","className","fontFamily","paddingLeft","_Widget_I18nText__WEBPACK_IMPORTED_MODULE_8__","keyOfI18n","LATEST_INFO","slice","flex","backgroundImage","backgroundSize","backgroundPosition","flexDirection","h2p","description","FEATURED_PRODUCTS","item","push","variants","name","currency","toUpperCase","price","join"],"mappings":"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","file":"static/js/6.18d9a9b9.chunk.js","sourcesContent":["import React, {useEffect} from 'react';\r\nimport {createUseStyles} from 'react-jss';\r\nimport {connect} from 'react-redux';\r\nimport {withRouter} from 'react-router-dom';\r\n\r\nimport h2p from 'html2plaintext';\r\n\r\nimport {\r\n    ARTICLE_INIT_FEATURED,\r\n    ARTICLE_INIT_TIPS,\r\n    MERCHANDISE_INIT_FEATURED\r\n} from '../../constants/actionType';\r\nimport agent from '../../agent';\r\n\r\nimport {I18nText} from \"../Widget/I18nText\";\r\nimport {keyOfI18n} from \"../../constants/locale/interface\";\r\nimport {redirectUrl} from \"../../api/ApiUtils\";\r\n\r\nconst styles = createUseStyles({\r\n    tips: {\r\n        padding: '0 3%',\r\n        marginTop: 50\r\n    },\r\n    tipsWrapper: {\r\n        margin: 0,\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n        padding: 0,\r\n    },\r\n    tipsItem: {\r\n        display: 'flex',\r\n        width: 'calc(50% - 20px)',\r\n        backgroundColor: '#f7f7f7',\r\n        margin: 10,\r\n        cursor : \"pointer\",\r\n        transition : \"box-shadow 0.3s\",\r\n        \"&:hover\" : {\r\n            boxShadow : \"3px 3px 15px #EFEFEF\"\r\n        }\r\n    },\r\n\r\n    featuredMerchandises: {\r\n        padding: '0 3%',\r\n        marginTop: 50\r\n    },\r\n    featuredMerchandisesWrapper: {\r\n        display: 'flex',\r\n        margin: 0,\r\n        padding: 0\r\n    },\r\n    featuredMerchandisesItem: {\r\n        width: 'calc(20% - 20px)',\r\n        margin: 10,\r\n        backgroundColor: 'transparent',\r\n        borderWidth: 0,\r\n        cursor: 'pointer',\r\n        transition : \"box-shadow 0.3s\",\r\n        \"&:hover\" : {\r\n            boxShadow : \"3px 3px 15px #EFEFEF\"\r\n        }\r\n    },\r\n    itemName : {\r\n        textAlign : \"left\",\r\n        paddingBottom : 7,\r\n        fontSize : 17,\r\n        fontWeight : 300,\r\n        color : \"#666\"\r\n    },\r\n    itemPrice : {\r\n        textAlign : \"left\",\r\n        paddingBottom : 15,\r\n        fontSize : 17,\r\n        fontWeight : 300,\r\n        textAlign : \"left\",\r\n        color : \"#666\"\r\n    },\r\n\r\n    // for mobile\r\n    '@media (max-width: 600px)': {\r\n        tipsItem: {\r\n            display: 'block',\r\n            width: 'calc(100% - 20px)'\r\n        },\r\n        featuredMerchandisesWrapper: {\r\n            display: 'block'\r\n        },\r\n        featuredMerchandisesItem: {\r\n            width: 'calc(100% - 20px)'\r\n        }\r\n    }\r\n    \r\n    // section: {\r\n    //     width: '100%',\r\n    //     margin: '0 80px'\r\n    // },\r\n    // productCategory: {\r\n    //     paddingTop: '40px',\r\n\r\n    //     paddingBottom: '40px',\r\n    //     // backgroundColor: theme.palette.background.paper\r\n    // },\r\n    // text: {\r\n    //     textAlign: 'center',\r\n    //     // color: theme.palette.secondary.light,\r\n    //     marginBottom: '30px',\r\n    //     wordWrap: 'break-word',\r\n    //     wordBreak: 'break-all'\r\n\r\n    // },\r\n    // title: {\r\n    //     paddingTop: '20px',\r\n    //     marginTop: '50px',\r\n    //     fontWeight: '700',\r\n    //     // color: theme.palette.primary.dark,\r\n    //     marginBottom: '20px',\r\n    //     textAlign: 'center'\r\n    // }\r\n});\r\n\r\n\r\nconst mapStateToProps = state => ({\r\n    featuredMerchandises: state.product.featuredMerchandises,\r\n    featuredArticles: state.feed.featuredArticles,\r\n    tips: state.feed.tips,\r\n    shopInfo: state.common.shopInfo\r\n});\r\n\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    initFeaturedArticles: () => {\r\n        try {\r\n            agent.Feeds.getFeaturedArticles()\r\n            .then(res => {\r\n                dispatch({\r\n                    type    : ARTICLE_INIT_FEATURED,\r\n                    payload : res.data.data.rows || []\r\n                })\r\n            })\r\n            .catch(err => {\r\n\r\n            })\r\n        } catch(err) {\r\n\r\n        }\r\n    },\r\n    initTips: () => {\r\n        try {\r\n            agent.Feeds.getTips()\r\n            .then(res => {\r\n                dispatch({\r\n                    type    : ARTICLE_INIT_TIPS,\r\n                    payload : res.data.data.rows || []\r\n                })\r\n            })\r\n            .catch(err => {\r\n\r\n            })\r\n        } catch(err) {\r\n\r\n        }\r\n    },\r\n    initFeaturedMerchandises: () => {\r\n        try {\r\n            agent.Products.getFeaturedMerchandises()\r\n            .then(res => {\r\n                dispatch({\r\n                    type    : MERCHANDISE_INIT_FEATURED,\r\n                    payload : res.data.data.rows || []\r\n                })\r\n            })\r\n            .catch(err => {\r\n\r\n            })\r\n        } catch(err) {\r\n\r\n        }\r\n    },\r\n    substring: str => {\r\n        return `${str.substr(0, 130)}...`;\r\n    }\r\n});\r\n\r\n\r\nconst MainPageOverview = props => {\r\n    const classes = styles();\r\n    const {featuredMerchandises, featuredArticles, tips, history, shopInfo} = props;\r\n\r\n    useEffect(() => {\r\n        if (featuredArticles === undefined) props.initFeaturedArticles();\r\n        if (tips === undefined) props.initTips();\r\n        if (featuredMerchandises === undefined) props.initFeaturedMerchandises();\r\n        return () => {\r\n\r\n        };\r\n    }, [featuredArticles, tips, featuredMerchandises]);\r\n\r\n    return <div>\r\n        <div>\r\n            {(featuredArticles || []).map((article, idx) => <li\r\n                key={idx}\r\n                style={{\r\n                    height: 390,\r\n                    display: 'flex',\r\n                    alignItems: 'flex-end',\r\n                    justifyContent: 'flex-end',\r\n                    cursor : \"pointer\",\r\n                    position: 'relative'\r\n                }}\r\n                onClick={() => redirectUrl('/articles/' + article.id, props.history)}\r\n            >\r\n                <img\r\n                    style={{\r\n                        objectFit : \"cover\",\r\n                        width : \"100%\",\r\n                        height : \"100%\"\r\n                    }} \r\n                    src={article.sections[0].media[0].url}\r\n                />\r\n                <span\r\n                    style={{\r\n                        position : \"absolute\",\r\n                        textShadow: '0px 1px 4px #000',\r\n                        color: '#fff',\r\n                        fontSize: 15,\r\n                        fontSize : \"2em\",\r\n                        bottom: 10,\r\n                        right: 15\r\n                    }}\r\n                >{article.sections[0].title}</span>\r\n            </li>)}\r\n        </div>\r\n\r\n        {(tips||[]).length > 0 && <div className={classes.tips}>\r\n            <h2 style={{ fontSize: 21, fontFamily: '-apple-system,BlinkMacSystemFont,sans-serif', paddingLeft : \"15px\"}}>\r\n                <I18nText keyOfI18n={keyOfI18n.LATEST_INFO}/>\r\n            </h2>\r\n            <ul className={classes.tipsWrapper}>\r\n                {tips.slice(0, 4).map((article, idx) => <li\r\n                    key={idx}\r\n                    className={classes.tipsItem}\r\n                    onClick={() => redirectUrl('/articles/' + article.id, props.history)}\r\n                >\r\n                    {(article.sections[0] || {}).media.length > 0 && <div\r\n                        style={{\r\n                            flex: 4,\r\n                            height: 250,\r\n                            backgroundImage: `url(${article.sections[0].media[0].url})`,\r\n                            backgroundSize: 'cover',\r\n                            backgroundPosition: 'center',\r\n                            cursor : \"pointer\"\r\n                        }}\r\n                    />}\r\n                    <div\r\n                        style={{\r\n                            flex: 6,\r\n                            display: 'flex',\r\n                            flexDirection: 'column',\r\n                            padding: 25,\r\n                            alignItems: 'center',\r\n                            justifyContent: 'center'\r\n                        }}\r\n                    >\r\n                        <h5\r\n                            style={{\r\n                                margin: 0\r\n                            }}\r\n                        >{article.sections[0].title}</h5>\r\n                        <p>{props.substring(h2p(article.sections[0].description))}</p>\r\n                    </div>\r\n                </li>)}\r\n            </ul>\r\n        </div>}\r\n        \r\n        {(featuredMerchandises || []).length > 0 && <div className={classes.featuredMerchandises}>\r\n            <h2 style={{ fontSize: 21, fontFamily: '-apple-system,BlinkMacSystemFont,sans-serif', paddingLeft : \"15px\" }}>\r\n                <I18nText keyOfI18n={keyOfI18n.FEATURED_PRODUCTS}/>\r\n            </h2>\r\n            <ul className={classes.featuredMerchandisesWrapper}>\r\n                {featuredMerchandises.map((item, idx) => <button\r\n                    key={idx}\r\n                    type=\"button\"\r\n                    className={classes.featuredMerchandisesItem}\r\n                    onClick={() => history.push(`/products/${item.id}`)}\r\n                >\r\n                    <div\r\n                        style={{\r\n                            backgroundImage: `url(${((((item.variants||[])[0]||{}).media||[])[0]||{}).url})`,\r\n                            backgroundPosition: 'top center',\r\n                            backgroundSize: 'cover',\r\n                            height: 280\r\n                        }}\r\n                    />\r\n                    <br/>\r\n                    <div>\r\n                        <div className={classes.itemName}>{item.name}</div>\r\n                        <div className={classes.itemPrice}>{`${shopInfo.currency.toUpperCase()} ${[((item.variants||[])[0]||{}).price,((item.variants||[])[(item.variants||[]).length-1]||{}).price].join('-')}`}</div>\r\n                    </div>\r\n                </button>)}\r\n            </ul>\r\n        </div>}\r\n    </div>;\r\n};\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(withRouter(MainPageOverview))"],"sourceRoot":""}