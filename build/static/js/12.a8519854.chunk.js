(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{864:function(e,a,t){"use strict";t.r(a);var r,n=t(5),c=t(30),i=t.n(c),o=t(50),l=t(48),p=t(0),s=t.n(p),d=t(43),u=t(202),m=t(204),f=(t(60),t(785)),O=t(203),E=t(13),h=t.n(E),b=t(845),g=(t(843),t(40)),y=t(103),x=t(6),v=t(804),I=t(17),N=t(10),C=t(41),T=Object(u.a)({wrapper:{padding:"0 9%",display:"flex"},formGroup:{flex:1,margin:"0 10px","&:first-child":{marginLeft:0},"&:last-child":{marginRight:0}},formInput:{width:"100%",height:40,borderRadius:2,border:"1px #dadada solid",padding:"0 15px",transition:"border 0.3s","&:focus":{border:"1px black solid"}},inputSet:{margin:"15px -5px -5px","&:first-child":{marginTop:-5}},inputGroup:{display:"flex"},inputWrapper:{display:"flex",flex:1,margin:5},phoneInput:{display:"flex","& > div":{flex:1},"& > div > input":{width:"100%"}},item:{display:"flex",flexDirection:"row",flexWrap:"wrap",width:"calc(100% - 30)",padding:15},itemThumb:{padding:"0px 10px",width:50,height:50,objectFit:"contain"},itemInfo:{display:"flex",flex:1,flexDirection:"row",alignItems:"center",flexWrap:"wrap"},itemName:{flex:1,minWidth:200,fontSize:16,"& > span":{fontSize:14,color:"#333"}},itemPrice:{padding:"15px 0px",fontSize:14,"& > span":{fontSize:14}},couponForm:{width:"100%",display:"flex",flexDirection:"row",flexWrap:"wrap",margin:"15px 0px","& > div":{flex:3},"& > input":{minWidth:200,height:30,borderRadius:3}},checkCouponBtn:{backgroundColor:"transparent",border:"none",cursor:"pointer",transition:"opacity 0.3s",fontSize:14,"&:hover":{opacity:.6}},summary:{padding:15},summaryRow:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"space-between",padding:"5px 0px",fontSize:14,"& > *":{fontSize:14}},actionBtn:(r={backgroundColor:"transparent",border:"none",display:"flex",width:"100%",justifyContent:"center",alignItems:"center",fontSize:14},Object(l.a)(r,"border","1px black solid"),Object(l.a)(r,"transition","opacity 0.3s"),Object(l.a)(r,"borderRadius",3),Object(l.a)(r,"padding",10),Object(l.a)(r,"cursor","pointer"),Object(l.a)(r,"&:hover, &:disabled",{opacity:.6,border:"1px #BBB solid"}),r),termsnConditions:{paddingTop:25,"& > span":{color:"#777",fontSize:12}},"@media (max-width: 1200px)":{inputGroup:{display:"block"},inputSet:{"&:last-child":{marginTop:30}}},"@media (max-width: 600px)":{wrapper:{display:"block"},formGroup:{margin:0,"&:last-child":{marginTop:60}},inputGroup:{display:"block"},inputSet:{"&:last-child":{marginTop:30}}}});a.default=Object(m.a)(Object(d.b)(function(e){return{items:e.cart.items,order:e.cart.order,rates:e.cart.rates||[]}},function(e,a){return{quoteShippingFee:function(){var a=Object(o.a)(i.a.mark(function a(t,r){var n;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g.a.Checkout.getShippingRate({items:t.map(function(e){return{id:e.id,qty:e.qty}}),shipping:{address:r,country:"HK"}});case 2:if(!((n=a.sent)||[]).length){a.next=8;break}return console.log(n),a.abrupt("return",e({type:x.w,payload:n}));case 8:O.b.error("Failed to calculate shipping fee",{position:O.b.POSITION.TOP_RIGHT});case 9:case"end":return a.stop()}},a)}));return function(e,t){return a.apply(this,arguments)}}(),placeOrder:function(){var t=Object(o.a)(i.a.mark(function t(r){var c,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,c=a.cookies.get("cart"),o=null,c){t.next=8;break}return t.next=5,g.a.Checkout.getCart();case 5:o=t.sent,(c=(((((o||{}).data||{}).data||{}).rows||[]).shift()||{}).id)&&a.cookies.set("cart",c);case 8:return t.next=10,g.a.Checkout.placeOrderWithoutLogin(Object(n.a)({},r,{items:c}));case 10:(((o=t.sent)||{}).data||{}).result&&(a.cookies.remove("cart"),e({type:x.q,payload:[]}),O.b.success("Order successed.",{position:O.b.POSITION.TOP_RIGHT})),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),O.b.error(((t.t0.response.data||{}).messages||[]).join("\n")||t.t0.message,{position:O.b.POSITION.TOP_RIGHT});case 17:case"end":return t.stop()}},t,null,[[0,14]])}));return function(e){return t.apply(this,arguments)}}(),updateOrder:function(a){return e({type:x.h,payload:a})},checkCoupons:function(){var e=Object(o.a)(i.a.mark(function e(a){var t,r,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a.length<1)){e.next=4;break}O.b.error("Please enter the coupon code(s).",{position:O.b.POSITION.TOP_RIGHT}),e.next=14;break;case 4:return e.prev=4,e.next=7,g.a.Checkout.getPromoCode(a);case 7:(((t=e.sent)||{}).data||{}).result&&(r=[],n=((t.data.data||{}).rows||[]).reduce(function(e,a){return e[a.code]=a,e},{}),a.split(/ *, */).filter(function(e){return e}).forEach(function(e){n[e]||r.push("".concat(e," is invalid."))}),r.length>0?O.b.error(r.join("\n"),{position:O.b.POSITION.TOP_RIGHT}):O.b.success("All coupons are valid.",{position:O.b.POSITION.TOP_RIGHT})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),O.b.error(((e.t0.response.data||{}).messages||[]).join("\n")||e.t0.message,{position:O.b.POSITION.TOP_RIGHT});case 14:case"end":return e.stop()}},e,null,[[4,11]])}));return function(a){return e.apply(this,arguments)}}()}})(function(e){var a=T(),t=e.items,r=e.order,c=e.rates,i=(((e.order||{contact:{},shipping:{},payment:{}}).shipping||{}).address||"").length;return s.a.createElement("div",null,s.a.createElement(y.a,{title:Object(C.a)(N.a.CHECKOUT)}),s.a.createElement("div",{className:a.wrapper},s.a.createElement("div",{className:a.formGroup,style:{flex:3}},s.a.createElement("h3",null,s.a.createElement(I.a,{keyOfI18n:N.a.CHECKOUT_BILLING_DETAIL})),s.a.createElement("div",null,s.a.createElement("div",{className:a.inputSet},s.a.createElement("div",{className:a.inputGroup},s.a.createElement("div",{className:a.inputWrapper},s.a.createElement("input",{type:"text",className:a.formInput,placeholder:Object(C.a)(N.a.FIRST_NAME),onChange:function(a){return e.updateOrder(Object(n.a)({},e.order,{contact:Object(n.a)({},(e.order||{}).contact,{first_name:a.target.value})}))}})),s.a.createElement("div",{className:a.inputWrapper},s.a.createElement("input",{type:"text",className:a.formInput,placeholder:Object(C.a)(N.a.LAST_NAME),onChange:function(a){return e.updateOrder(Object(n.a)({},e.order,{contact:Object(n.a)({},(e.order||{}).contact,{last_name:a.target.value})}))}}))),s.a.createElement("div",{className:a.inputGroup},s.a.createElement("div",{className:a.inputWrapper},s.a.createElement("input",{type:"text",className:a.formInput,placeholder:Object(C.a)(N.a.EMAIL_ADDRESS),onChange:function(a){return e.updateOrder(Object(n.a)({},e.order,{contact:Object(n.a)({},(e.order||{}).contact,{email:a.target.value})}))}})),s.a.createElement("div",{className:a.inputWrapper},s.a.createElement(b.a,{type:"text",className:h()(a.formInput,a.phoneInput),placeholder:Object(C.a)(N.a.CHECKOUT_BILLING_DETAIL_PHONE_PLACEHOLDER),onChange:function(a){return e.updateOrder(Object(n.a)({},e.order,{contact:Object(n.a)({},(e.order||{}).contact,{phone:a})}))}}))),s.a.createElement("div",{className:a.inputWrapper},s.a.createElement("input",{type:"text",className:a.formInput,placeholder:Object(C.a)(N.a.CHECKOUT_BILLING_STREET_ADDRESS),onChange:function(a){return e.updateOrder(Object(n.a)({},e.order,{shipping:Object(n.a)({},(e.order||{}).shipping,{address:a.target.value})}))}}))),s.a.createElement("h3",{style:{paddingTop:"15px"}},s.a.createElement(I.a,{keyOfI18n:N.a.CHECKOUT_PAYMENT_INFOFORMATION})),s.a.createElement("div",{className:a.inputSet},s.a.createElement("div",{className:a.inputWrapper},s.a.createElement(f.a,{format:"#### #### #### ####",className:a.formInput,placeholder:Object(C.a)(N.a.CHECKOUT_BILLING_DETAIL_VISA_PLACEHOLDER),onValueChange:function(a){var t=a.value;return e.updateOrder(Object(n.a)({},e.order,{payment:Object(n.a)({},(e.order||{}).payment,{card:t})}))}})),s.a.createElement("div",{className:a.inputGroup},s.a.createElement("div",{className:a.inputWrapper},s.a.createElement(f.a,{format:"##/##",className:a.formInput,placeholder:Object(C.a)(N.a.CHECKOUT_BILLING_EXPIRY_DATE),mask:["M","M","Y","Y"],onValueChange:function(a){var t=a.formattedValue;return e.updateOrder(Object(n.a)({},e.order,{payment:Object(n.a)({},(e.order||{}).payment,{exp_date:t})}))}})),s.a.createElement("div",{className:a.inputWrapper},s.a.createElement(f.a,{format:"###",className:a.formInput,placeholder:Object(C.a)(N.a.CHECKOUT_BILLING_CVC),onValueChange:function(a){var t=a.value;return e.updateOrder(Object(n.a)({},e.order,{payment:Object(n.a)({},(e.order||{}).payment,{csc:t})}))}})))))),s.a.createElement("div",{className:a.formGroup,style:{flex:2}},s.a.createElement("div",null,s.a.createElement("h3",null,s.a.createElement(I.a,{keyOfI18n:N.a.CHECKOUT_YOUR_ORDER_SUMMARY})),s.a.createElement("div",{style:{width:"calc(100% - 30px)",border:"1px #dadada solid",borderRadius:2,padding:"15px"}},(t||[]).map(function(e,t){return s.a.createElement("div",{key:"item-".concat(t),className:a.item},s.a.createElement("img",{className:a.itemThumb,src:(e.media||[])[0]}),s.a.createElement("div",{className:a.itemInfo},s.a.createElement("div",{className:a.itemName},e.name,s.a.createElement("br",null),s.a.createElement("span",null,e.variant)),s.a.createElement("div",{className:a.itemPrice},s.a.createElement(f.a,{value:e.price,thousandSeparator:!0,prefix:"HK$",displayType:"text"})," x ",e.qty)))}),s.a.createElement("div",{style:{height:.5,backgroundColor:"#dadada"}})," ",s.a.createElement("div",{className:a.couponForm},s.a.createElement("div",{className:a.inputWrapper},s.a.createElement("input",{type:"text",className:a.formInput,placeholder:Object(C.a)(N.a.PROMO_CODE_TYPE_YOUR_PROMO_CODE_HERE),onChange:function(a){return e.updateOrder(Object(n.a)({},e.order,{coupons:a.target.value}))}})),s.a.createElement("div",{style:{display:"flex",justifyContent:"center",flex:1}},s.a.createElement("button",{type:"button",className:a.checkCouponBtn,onClick:function(a){return e.checkCoupons((e.order||{}).coupons||"")},disabled:!((r||{}).coupons||"").length},s.a.createElement(I.a,{keyOfI18n:N.a.PROMO_CODE_CHECK_BTN})))),s.a.createElement("div",{style:{height:.5,backgroundColor:"#dadada"}})," ",s.a.createElement("div",{className:a.summary},s.a.createElement("div",{className:a.summaryRow},s.a.createElement(I.a,{keyOfI18n:N.a.CHECKOUT_SUBTOTAL}),s.a.createElement(f.a,{value:(t||[]).reduce(function(e,a){return e+a.qty*a.price},0),thousandSeparator:!0,prefix:"HK$",displayType:"text"})),s.a.createElement("div",{className:a.summaryRow},s.a.createElement(I.a,{keyOfI18n:N.a.CHECKOUT_SHIPPING_FEE}),s.a.createElement(f.a,{value:function(){var a=Object.keys((e.order||{}).shippings||{})[0]||"",t=((e.order||{}).shippings||{})[a];return((c.filter(function(e){return e.id==t})[0]||{}).rates||{})[a]}()||"-",thousandSeparator:!0,prefix:"HK$",displayType:"text"}))),s.a.createElement("div",{style:{height:.5,backgroundColor:"#dadada"}})," ",s.a.createElement("div",{className:a.summary},c.length?s.a.createElement("div",null,s.a.createElement(v.a,{placeholder:"Select Courier",onChange:function(a){var t=a.value;return e.updateOrder(Object(n.a)({},e.order,{shippings:Object(l.a)({},t.split(":")[0],t.split(":")[1])}))},options:c.map(function(e){return{value:"".concat(Object.keys(e.rates)[0],":").concat(e.id),label:"".concat(e.name," - HK$").concat(Object.values(e.rates)[0])}})}),s.a.createElement("div",{className:a.termsnConditions},s.a.createElement("span",null,s.a.createElement(I.a,{keyOfI18n:N.a.TERM_AND_CONDITIONS}))),s.a.createElement("button",{className:a.actionBtn,style:{marginTop:15},onClick:function(a){e.placeOrder(e.order)},disabled:!i||!Object.keys(r.shippings||{}).length},s.a.createElement(I.a,{keyOfI18n:N.a.PLACE_ORDER}))):s.a.createElement("button",{className:a.actionBtn,onClick:function(a){return e.quoteShippingFee(t,e.order.shipping.address)},disabled:!i},s.a.createElement(I.a,{keyOfI18n:N.a.CONTINUE_SHIPPING}))))))))}))}}]);
//# sourceMappingURL=12.a8519854.chunk.js.map